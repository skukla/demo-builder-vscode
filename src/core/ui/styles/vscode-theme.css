/* ============================================
   UNIFIED THEME SYSTEM - VS Code Integration

   This file ensures CONSISTENT appearance regardless
   of VS Code theme. We override VS Code's theme
   variables with our own design tokens.

   Philosophy: Extension looks the same whether user
   has light, dark, or high-contrast VS Code theme.
   ============================================ */

@layer theme {
    /* Force consistent body styling regardless of VS Code theme */
    body.vscode-dark,
    body.vscode-light,
    body.vscode-high-contrast,
    body.vscode-high-contrast-light {
        /* Use our design tokens, NOT VS Code variables */
        /* Background: dark gray, Text: light gray for proper contrast */
        background: var(--spectrum-global-color-gray-75);
        color: var(--spectrum-global-color-gray-800);
    }

    /* =========================================
       SPECTRUM TOKEN OVERRIDES
       Force dark theme tokens for consistency
       ========================================= */

    body .spectrum--dark,
    body .spectrum--light {
        /* Background colors - use Spectrum dark theme values */
        /* Depth layering: gray-50 is deepest (content), gray-75 is elevated (sticky bars) */
        --spectrum-global-color-gray-50: #000000;
        --spectrum-global-color-gray-75: #0d0d0d;
        --spectrum-global-color-gray-100: #2d2d2d;
        --spectrum-global-color-gray-200: #3d3d3d;

        /* Input and interactive element backgrounds */
        --spectrum-alias-background-color-default: var(--spectrum-global-color-gray-75);
        --spectrum-alias-background-color-modal: var(--spectrum-global-color-gray-100);
        --spectrum-alias-background-color-overlay: var(--spectrum-global-color-gray-100);

        /* Text colors - consistent light text on dark background */
        --spectrum-alias-text-color: var(--spectrum-global-color-gray-800);
        --spectrum-alias-text-color-secondary: var(--spectrum-global-color-gray-600);
        --spectrum-alias-label-text-color: var(--spectrum-global-color-gray-800);

        /* Border colors - subtle borders for dark theme */
        --spectrum-alias-border-color: var(--spectrum-global-color-gray-400);
        --spectrum-alias-border-color-hover: var(--spectrum-global-color-blue-500);
        --spectrum-alias-border-color-focus: var(--spectrum-global-color-blue-500);

        /* Selection colors */
        --spectrum-alias-highlight-hover: rgba(255, 255, 255, 0.06);
        --spectrum-alias-highlight-active: rgba(255, 255, 255, 0.1);
        --spectrum-alias-highlight-selected: rgba(255, 255, 255, 0.1);
    }

    /* =========================================
       COMPONENT OVERRIDES
       Ensure consistent component styling
       ========================================= */

    /* Well component - transparent, no border (used for form grouping) */
    body [class*="spectrum-Well"] {
        background-color: transparent !important;
        border: none !important;
    }

    /* ListView - Let Spectrum handle styling natively (uses alias tokens above) */

    /* TextField and SearchField styling - transparent background to blend with page */
    body [class*="spectrum-Textfield"] input,
    body [class*="spectrum-SearchField"] input {
        background-color: transparent !important;
        color: var(--spectrum-global-color-gray-900) !important;
        border-color: var(--spectrum-global-color-gray-400) !important;
    }

    body [class*="spectrum-Textfield"] input:focus,
    body [class*="spectrum-SearchField"] input:focus {
        border-color: var(--spectrum-global-color-blue-500) !important;
    }

    /* Button styling - use light text on dark backgrounds */
    /* Use precise class matching to avoid targeting internal elements like spectrum-Button-label */
    body button[class*="spectrum-Button"]:not([class*="quiet"]):not([class*="cta"]):not(.dashboard-action-button) {
        background-color: var(--spectrum-global-color-gray-200) !important;
        color: var(--spectrum-global-color-gray-800) !important;
        border-color: var(--spectrum-global-color-gray-400) !important;
    }

    body button[class*="spectrum-Button"]:not([class*="quiet"]):not([class*="cta"]):not(.dashboard-action-button):hover {
        background-color: var(--spectrum-global-color-gray-300) !important;
    }

    body button[class*="spectrum-Button"][class*="accent"] {
        background-color: var(--spectrum-global-color-blue-500) !important;
        color: var(--spectrum-global-color-gray-900) !important;
    }

    body button[class*="spectrum-Button"][class*="secondary"]:not(.dashboard-action-button) {
        background-color: var(--spectrum-global-color-gray-200) !important;
        color: var(--spectrum-global-color-gray-800) !important;
    }

    /* Ensure internal button elements don't get background overrides */
    body [class*="spectrum-Button-label"],
    body [class*="spectrum-Button-icon"] {
        background-color: transparent !important;
    }

    /* Picker/Dropdown styling */
    body [class*="spectrum-Picker"] {
        background-color: var(--spectrum-global-color-gray-100) !important;
        color: var(--spectrum-global-color-gray-900) !important;
        border-color: var(--spectrum-global-color-gray-400) !important;
    }

    /* ProgressBar and ProgressCircle */
    body [class*="spectrum-ProgressBar-fill"],
    body [class*="spectrum-ProgressCircle-fill"] {
        background-color: var(--spectrum-global-color-blue-500) !important;
    }

    /* Badge styling - use our design tokens */
    body [class*="spectrum-Badge"] {
        background-color: var(--spectrum-global-color-gray-200) !important;
        color: var(--spectrum-global-color-gray-900) !important;
    }

    /* Divider */
    body [class*="spectrum-Divider"] {
        background-color: var(--spectrum-global-color-gray-400) !important;
    }

    /* Heading and text colors */
    body [class*="spectrum-Heading"] {
        color: var(--spectrum-global-color-gray-900) !important;
    }

    body [class*="spectrum-Body"],
    body [class*="spectrum-Detail"] {
        color: var(--spectrum-global-color-gray-700) !important;
    }

    /* Status colors - preserve semantic meaning with our tokens */
    body [color="positive"] {
        color: var(--db-status-success) !important;
    }

    body [color="negative"] {
        color: var(--db-status-error) !important;
    }

    body [color="notice"] {
        color: var(--db-status-warning) !important;
    }

    /* =========================================
       SCROLLBAR STYLING
       Consistent scrollbars regardless of theme
       ========================================= */

    body ::-webkit-scrollbar-thumb {
        background: var(--spectrum-global-color-gray-500);
    }

    body ::-webkit-scrollbar-thumb:hover {
        background: var(--spectrum-global-color-gray-400);
    }

    body ::-webkit-scrollbar-thumb:active {
        background: var(--spectrum-global-color-gray-300);
    }
}
